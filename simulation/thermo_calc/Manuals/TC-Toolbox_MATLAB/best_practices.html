<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Best Practices &mdash; TC-Toolbox for MATLAB® 2023b documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="API Reference" href="api_reference.html" />
    <link rel="prev" title="Architecture overview" href="architecture.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            TC-Toolbox for MATLAB®
          </a>
              <div class="version">
                2023b
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Quick Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="architecture.html">Architecture overview</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Best Practices</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#using-tab-completion-and-the-integrated-documentation">Using Tab-Completion and the Integrated documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#re-use-of-the-single-equilibrium-calculation-state">Re-use of the Single Equilibrium Calculation State</a></li>
<li class="toctree-l2"><a class="reference internal" href="#re-use-and-saving-results">Re-use and Saving Results</a></li>
<li class="toctree-l2"><a class="reference internal" href="#using-the-tctoolbox-class-efficiently">Using the TCToolbox class efficiently</a></li>
<li class="toctree-l2"><a class="reference internal" href="#parallel-calculations">Parallel Calculations</a></li>
<li class="toctree-l2"><a class="reference internal" href="#handling-calculation-engine-crashes">Handling Calculation Engine Crashes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#process-metallurgy-calculations">Process Metallurgy Calculations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#equilibrium-calculations-with-changing-elements-between-calculations">Equilibrium calculations with changing elements between calculations</a></li>
<li class="toctree-l3"><a class="reference internal" href="#zones">Zones</a></li>
<li class="toctree-l3"><a class="reference internal" href="#applications">Applications</a></li>
<li class="toctree-l3"><a class="reference internal" href="#implementation-of-practical-process-models">Implementation of practical process models</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api_reference.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">Troubleshooting</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">TC-Toolbox for MATLAB®</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Best Practices</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="best-practices">
<span id="best-practices-chapter"></span><h1>Best Practices<a class="headerlink" href="#best-practices" title="Permalink to this heading">¶</a></h1>
<section id="using-tab-completion-and-the-integrated-documentation">
<h2>Using Tab-Completion and the Integrated documentation<a class="headerlink" href="#using-tab-completion-and-the-integrated-documentation" title="Permalink to this heading">¶</a></h2>
<p>TC-Toolbox contains over 1000 functions and more than 200 classes.
These functions are available for use in different contexts, as described in the <a class="reference internal" href="architecture.html#high-level-architecture-chapter"><span class="std std-ref">Architecture overview</span></a>.</p>
<p>In order to know which functions and classes are available for you at a given time and how they can be used,
we encourage you to use MATLAB<sup>®</sup> tab completion and the MATLAB<sup>®</sup> help.</p>
<p>This is a feature of MATLAB<sup>®</sup> and the exact functionality can vary depending on the version of MATLAB<sup>®</sup> and
if you use MATLAB<sup>®</sup> live scripts, classic MATLAB<sup>®</sup> scripts or the interactive console.</p>
<p>To access tab completion, press the <strong>dot (.)</strong> key then <strong>Tab</strong>. Use the <strong>up/down arrow</strong> keys to scroll through the
list.</p>
<img alt="_images/tab-completion.png" src="_images/tab-completion.png" />
<p>To open the help for a specific function or class, click to place the cursor on the function or object and press the
<strong>F1</strong> key.</p>
<img alt="_images/F1.png" src="_images/F1.png" />
<p>The built-in help for parameters of a specific function can be reached by placing the cursor within the parentheses of
the function and pressing <strong>CTRL</strong> + <strong>F1</strong>.</p>
<img alt="_images/CTRL_F1.png" src="_images/CTRL_F1.png" />
<p>Click <strong>More Help…</strong> to view the corresponding help text.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The MATLAB<sup>®</sup> script first needs to be run before you can view help text when <strong>More Help…</strong> is clicked. Once
the script is run, the respective object is present in the workspace and the help is available.</p>
</div>
</section>
<section id="re-use-of-the-single-equilibrium-calculation-state">
<h2>Re-use of the Single Equilibrium Calculation State<a class="headerlink" href="#re-use-of-the-single-equilibrium-calculation-state" title="Permalink to this heading">¶</a></h2>
<p>The Thermo-Calc core keeps an internal state containing the data from previously performed calculations (such as
composition of sublattices, previously formed phases, etc.). This is used for start values of future calculations
(if not explicitly overwritten) and can strongly influence their convergence and calculation time. It can be useful to
save and restore later the core-state <strong>in advanced use cases</strong>, these include:</p>
<ul class="simple">
<li><p>Improving the convergence speed in case of very complicated equilibria if a similar equilibrium has already been
calculated. “Similar” refers here primarily to composition, temperature, and entered phase set. This
case can occur, for example, with the Thermo-Calc nickel-based superalloys database, TCNi.</p></li>
<li><p>Convenient and fast switching between states that have changed a lot (for example regarding suspended phases,
numerical settings, etc.)</p></li>
</ul>
<p>The mechanism of saving and restoring the state is called bookmarking and is controlled with the two methods
<code class="xref mat mat-func docutils literal notranslate"><span class="pre">bookmark_state()</span></code> and <code class="xref mat mat-func docutils literal notranslate"><span class="pre">set_state_to_bookmark()</span></code>. The following short example shows how to switch between
two different states:</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="nb">import</span><span class="w"> </span><span class="n">tc_toolbox</span><span class="o">.*</span>
<span class="n">session</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">TCToolbox</span><span class="p">();</span>

<span class="n">calc</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">session</span><span class="k">...</span>
<span class="w">        </span><span class="p">.</span><span class="n">select_database_and_elements</span><span class="p">(</span><span class="s">&quot;FEDEMO&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;Fe&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;C&quot;</span><span class="p">])</span><span class="k">...</span>
<span class="w">        </span><span class="p">.</span><span class="n">get_system</span><span class="p">()</span><span class="k">...</span>
<span class="w">        </span><span class="p">.</span><span class="n">with_single_equilibrium_calculation</span><span class="p">()</span><span class="k">...</span>
<span class="w">        </span><span class="p">.</span><span class="n">set_condition</span><span class="p">(</span><span class="n">ThermodynamicQuantity</span><span class="p">.</span><span class="n">temperature</span><span class="p">(),</span><span class="w"> </span><span class="mf">2000.0</span><span class="p">)</span><span class="k">...</span>
<span class="w">        </span><span class="p">.</span><span class="n">set_condition</span><span class="p">(</span><span class="s">&quot;X(C)&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">0.01</span><span class="p">);</span>

<span class="n">calc</span><span class="p">.</span><span class="n">calculate</span><span class="p">();</span>
<span class="n">bookmark_temp_condition</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">calc</span><span class="p">.</span><span class="n">bookmark_state</span><span class="p">();</span>

<span class="n">calc</span><span class="p">.</span><span class="n">set_phase_to_fixed</span><span class="p">(</span><span class="s">&quot;BCC&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5</span><span class="p">);</span>
<span class="n">calc</span><span class="p">.</span><span class="n">remove_condition</span><span class="p">(</span><span class="n">ThermodynamicQuantity</span><span class="p">.</span><span class="n">temperature</span><span class="p">());</span>
<span class="n">bookmark_fixed_phase_condition</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">calc</span><span class="p">.</span><span class="n">bookmark_state</span><span class="p">();</span>

<span class="n">result_temp</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">calc</span><span class="p">.</span><span class="n">set_state_to_bookmark</span><span class="p">(</span><span class="n">bookmark_temp_condition</span><span class="p">);</span>
<span class="nb">disp</span><span class="p">(</span><span class="s">&quot;Conditions do contain temperature:&quot;</span><span class="p">)</span>
<span class="nb">disp</span><span class="p">(</span><span class="n">result_temp</span><span class="p">.</span><span class="n">get_conditions</span><span class="p">())</span>
<span class="c">% this calculation had already been performed</span>
<span class="nb">disp</span><span class="p">(</span><span class="s">&quot;Stable phases (do not contain BCC):&quot;</span><span class="p">)</span>
<span class="nb">disp</span><span class="p">(</span><span class="n">result_temp</span><span class="p">.</span><span class="n">get_stable_phases</span><span class="p">())</span>

<span class="n">result_fixed_phase</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">calc</span><span class="p">.</span><span class="n">set_state_to_bookmark</span><span class="p">(</span><span class="n">bookmark_fixed_phase_condition</span><span class="p">);</span>
<span class="nb">disp</span><span class="p">(</span><span class="s">&quot;Conditions do not contain temperature:&quot;</span><span class="p">)</span>
<span class="nb">disp</span><span class="p">(</span><span class="n">result_fixed_phase</span><span class="p">.</span><span class="n">get_conditions</span><span class="p">())</span>
<span class="c">% this calculation had **not yet** been performed</span>
<span class="nb">disp</span><span class="p">(</span><span class="s">&quot;Stable phases (do contain BCC):&quot;</span><span class="p">)</span>
<span class="nb">disp</span><span class="p">(</span><span class="n">calc</span><span class="p">.</span><span class="n">calculate</span><span class="p">().</span><span class="n">get_stable_phases</span><span class="p">())</span>
</pre></div>
</div>
</section>
<section id="re-use-and-saving-results">
<h2>Re-use and Saving Results<a class="headerlink" href="#re-use-and-saving-results" title="Permalink to this heading">¶</a></h2>
<p>Before a calculation is run in MATLAB<sup>®</sup>, a check is made to see if the exact same calculation has run before,
and if that is the case, the result from the calculation can be loaded from disk instead of being re-calculated.</p>
<p>This functionality is always enabled within a script running MATLAB<sup>®</sup>, but you can make it work the same way
when re-running a script, or even when running a completely different script.</p>
<p>You can set up a folder location to re-use results from saved calculations. This folder can be a network folder and
shared by many users. This is done using the method <code class="xref mat mat-func docutils literal notranslate"><span class="pre">set_cache_folder()</span></code>.</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="nb">import</span><span class="w"> </span><span class="n">tc_toolbox</span><span class="o">.*</span>

<span class="n">session</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">TCToolbox</span><span class="p">();</span>
<span class="n">session</span><span class="p">.</span><span class="n">set_cache_folder</span><span class="p">(</span><span class="s">&quot;cache&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The calculation is not re-run if there is a previous MATLAB<sup>®</sup> calculation with the same cache folder and exactly
the same settings; the result is instead loaded from disk.</p>
<p>Another possibility is to explicitly save the result to disk and reload it later:</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="nb">import</span><span class="w"> </span><span class="n">tc_toolbox</span><span class="o">.*</span>

<span class="n">session</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">TCToolbox</span><span class="p">();</span>
<span class="c">% ... the system and calculator are set up and the calculation is performed</span>
<span class="n">result</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">calculator</span><span class="p">.</span><span class="n">calculate</span><span class="p">()</span>

<span class="n">result</span><span class="p">.</span><span class="n">save_to_disk</span><span class="p">(</span><span class="s">&quot;./result_dir&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>You can then load the result again in another session, for example:</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="nb">import</span><span class="w"> </span><span class="n">tc_toolbox</span><span class="o">.*</span>

<span class="n">session</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">TCToolbox</span><span class="p">();</span>
<span class="n">result</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">session</span><span class="p">.</span><span class="n">load_result_from_disk</span><span class="p">().</span><span class="n">diffusion</span><span class="p">(</span><span class="s">&quot;./result_dir&quot;</span><span class="p">)</span>
<span class="p">[</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">frac</span><span class="p">]</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">result</span><span class="p">.</span><span class="n">get_mole_fraction_of_component_at_time</span><span class="p">(</span><span class="s">&quot;Cr&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">1000.0</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="using-the-tctoolbox-class-efficiently">
<h2>Using the TCToolbox class efficiently<a class="headerlink" href="#using-the-tctoolbox-class-efficiently" title="Permalink to this heading">¶</a></h2>
<p>Normally you should only create <em>one</em> <code class="xref mat mat-func docutils literal notranslate"><span class="pre">TCToolbox()</span></code> variable.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When a <code class="xref mat mat-func docutils literal notranslate"><span class="pre">TCToolbox()</span></code> variable is deleted, the Java backend engine process is stopped and all temporary data is
deleted. When creating a new <code class="xref mat mat-func docutils literal notranslate"><span class="pre">TCToolbox()</span></code> variable, a new Java process is started. This can take several
seconds.</p>
</div>
<p>If appropriate, it is safe to create a <code class="xref mat mat-func docutils literal notranslate"><span class="pre">TCToolbox()</span></code> variable in a loop. <strong>Due to
the time it takes this only makes sense if the calculation time per iteration is longer than a minute</strong>.</p>
<p>To prevent creating a <code class="xref mat mat-func docutils literal notranslate"><span class="pre">TCToolbox()</span></code> variable multiple times, you can use the following pattern.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="nb">import</span><span class="w"> </span><span class="n">tc_toolbox</span><span class="o">.*</span>

<span class="n">session</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">tc_toolbox</span><span class="p">.</span><span class="n">TCToolbox</span><span class="p">();</span>
<span class="nb">system</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">session</span><span class="p">.</span><span class="n">select_database_and_elements</span><span class="p">(</span><span class="s">&quot;FEDEMO&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;Fe&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Cr&quot;</span><span class="p">]).</span><span class="n">get_system</span><span class="p">();</span>
<span class="n">calculation</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">system</span><span class="p">.</span><span class="n">with_single_equilibrium_calculation</span><span class="p">();</span>
<span class="n">calculation</span><span class="p">.</span><span class="n">set_condition</span><span class="p">(</span><span class="s">&quot;T&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">1000</span><span class="p">);</span>

<span class="k">for</span><span class="w"> </span><span class="nb">i</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">0</span><span class="p">:</span><span class="mi">50</span>
<span class="w">    </span><span class="n">calculate</span><span class="p">(</span><span class="n">calculation</span><span class="p">)</span>
<span class="k">end</span>

<span class="k">function</span><span class="w"> </span><span class="nf">calculate</span><span class="p">(</span>calculator<span class="p">)</span>
<span class="w">    </span><span class="c">% you could also pass the `session` or `system` object if more appropriate</span>
<span class="w">    </span><span class="n">calculator</span><span class="p">.</span><span class="n">set_condition</span><span class="p">(</span><span class="s">&quot;W(Cr)&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">0.1</span><span class="p">);</span>
<span class="w">    </span><span class="c">% further configuration ...</span>

<span class="w">    </span><span class="n">result</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">calculator</span><span class="p">.</span><span class="n">calculate</span><span class="p">();</span>
<span class="w">    </span><span class="c">% ...</span>
<span class="w">    </span><span class="n">result</span><span class="p">.</span><span class="n">invalidate</span><span class="p">();</span><span class="w">  </span><span class="c">% if the temporary data needs to be cleaned up immediately</span>
<span class="k">end</span>
</pre></div>
</div>
</section>
<section id="parallel-calculations">
<h2>Parallel Calculations<a class="headerlink" href="#parallel-calculations" title="Permalink to this heading">¶</a></h2>
<p>It is possible to perform parallel calculations with TC-Toolbox using the Parallel Computing Toolbox<sup>TM</sup> of
MATLAB<sup>®</sup>. This is a separate toolbox that can be purchased for MATLAB<sup>®</sup>, it is not part of the standard
configuration of MATLAB<sup>®</sup>.</p>
<p>A general pattern that can be applied is shown below. This code snippet shows how to perform single equilibrium
calculations for different compositions in parallel. In the same way all other calculators of Thermo-Calc can be
used or combined.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="n">num_processes</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<span class="n">min_cr</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span><span class="w">  </span><span class="c">% in wt-%</span>
<span class="n">max_cr</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">19</span><span class="p">;</span><span class="w">  </span><span class="c">% in wt-%</span>
<span class="n">delta_cr</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w">  </span><span class="c">% in wt-%</span>
<span class="n">chunk_size</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span><span class="w">  </span><span class="c">% this simple code expects that the Cr-range can be exactly divided into such chunks</span>

<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nb">isempty</span><span class="p">(</span><span class="n">gcp</span><span class="p">(</span><span class="s">&#39;nocreate&#39;</span><span class="p">)))</span>
<span class="w">    </span><span class="n">parpool</span><span class="p">(</span><span class="s">&quot;local&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">num_processes</span><span class="p">);</span>
<span class="k">end</span>

<span class="n">num_points</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="n">max_cr</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">min_cr</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">delta_cr</span><span class="p">;</span>
<span class="n">total_cr_range</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">linspace</span><span class="p">(</span><span class="n">min_cr</span><span class="p">,</span><span class="w"> </span><span class="n">max_cr</span><span class="p">,</span><span class="w"> </span><span class="n">num_points</span><span class="p">);</span>
<span class="n">chunked_cr_ranges</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">num2cell</span><span class="p">(</span><span class="nb">reshape</span><span class="p">(</span><span class="n">total_cr_range</span><span class="p">,</span><span class="w"> </span><span class="n">chunk_size</span><span class="p">,</span><span class="w"> </span><span class="p">[]),</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>

<span class="c">% this requires the Parallel Computing Toolbox(TM), can be run with &quot;for&quot; instead without parallelization</span>
<span class="n">num_chunks</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">ceil</span><span class="p">(</span><span class="n">num_points</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">chunk_size</span><span class="p">);</span>
<span class="n">bcc_fraction_results</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">cell</span><span class="p">(</span><span class="n">num_chunks</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="k">parfor</span><span class="w"> </span><span class="n">chunk_index</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">num_chunks</span>
<span class="w">    </span><span class="n">bcc_fraction_results</span><span class="p">{</span><span class="n">chunk_index</span><span class="p">}</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">do_perform</span><span class="p">(</span><span class="n">chunked_cr_ranges</span><span class="p">{</span><span class="n">chunk_index</span><span class="p">});</span>
<span class="k">end</span>

<span class="n">bcc_phase_fraction</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">cell2mat</span><span class="p">(</span><span class="n">bcc_fraction_results</span><span class="p">);</span>
<span class="c">% ... use the result in `bcc_phase_fraction`, for example for plotting</span>


<span class="k">function</span><span class="w"> </span>phase_fractions<span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nf">do_perform</span><span class="p">(</span>cr_range<span class="p">)</span>
<span class="w">    </span><span class="c">% this function is running in a subprocess</span>
<span class="w">    </span><span class="nb">import</span><span class="w"> </span><span class="n">tc_toolbox</span><span class="p">.</span><span class="n">step_or_map_diagrams</span><span class="o">.*</span>
<span class="w">    </span><span class="nb">import</span><span class="w"> </span><span class="n">tc_toolbox</span><span class="o">.*</span>

<span class="w">    </span><span class="n">elements</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;Fe&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Cr&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Ni&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;C&quot;</span><span class="p">];</span>

<span class="w">    </span><span class="n">session</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">TCToolbox</span><span class="p">();</span>

<span class="w">    </span><span class="n">sys</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">session</span><span class="p">.</span><span class="n">select_database_and_elements</span><span class="p">(</span><span class="s">&quot;FEDEMO&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">elements</span><span class="p">).</span><span class="n">get_system</span><span class="p">();</span>

<span class="w">    </span><span class="n">calc</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">sys</span><span class="p">.</span><span class="n">with_single_equilibrium_calculation</span><span class="p">();</span>
<span class="w">    </span><span class="n">calc</span><span class="p">.</span><span class="n">set_condition</span><span class="p">(</span><span class="n">ThermodynamicQuantity</span><span class="p">.</span><span class="n">temperature</span><span class="p">(),</span><span class="w"> </span><span class="mf">1100.0</span><span class="p">);</span><span class="w"> </span><span class="c">% in K</span>
<span class="w">    </span><span class="n">calc</span><span class="p">.</span><span class="n">set_condition</span><span class="p">(</span><span class="n">ThermodynamicQuantity</span><span class="p">.</span><span class="n">mass_fraction_of_a_component</span><span class="p">(</span><span class="s">&quot;C&quot;</span><span class="p">),</span><span class="w"> </span><span class="mf">0.1</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">100</span><span class="p">);</span>
<span class="w">    </span><span class="n">calc</span><span class="p">.</span><span class="n">set_condition</span><span class="p">(</span><span class="n">ThermodynamicQuantity</span><span class="p">.</span><span class="n">mass_fraction_of_a_component</span><span class="p">(</span><span class="s">&quot;Ni&quot;</span><span class="p">),</span><span class="w"> </span><span class="mf">2.0</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">100</span><span class="p">);</span>

<span class="w">    </span><span class="n">phase_fractions</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">zeros</span><span class="p">(</span><span class="nb">size</span><span class="p">(</span><span class="n">cr_range</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">));</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">cr_index</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nb">size</span><span class="p">(</span><span class="n">cr_range</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="w">        </span><span class="n">cr</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">cr_range</span><span class="p">(</span><span class="n">cr_index</span><span class="p">);</span>
<span class="w">        </span><span class="n">calc</span><span class="p">.</span><span class="n">set_condition</span><span class="p">(</span><span class="s">&quot;W(Cr)&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">cr</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">100</span><span class="p">);</span>
<span class="w">        </span><span class="n">result</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">calc</span><span class="p">.</span><span class="n">calculate</span><span class="p">();</span>
<span class="w">        </span><span class="n">phase_fractions</span><span class="p">(</span><span class="n">cr_index</span><span class="p">)</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">result</span><span class="p">.</span><span class="n">get_value_of</span><span class="p">(</span><span class="s">&quot;NPM(BCC_A2)&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
</section>
<section id="handling-calculation-engine-crashes">
<h2>Handling Calculation Engine Crashes<a class="headerlink" href="#handling-calculation-engine-crashes" title="Permalink to this heading">¶</a></h2>
<p>In some cases the Thermo-Calc calculation engine can crash. If batch calculations are performed, this brings
down the complete batch. To handle this situation there is an error you can use:
<code class="xref mat mat-func docutils literal notranslate"><span class="pre">UnrecoverableCalculationException()</span></code>.</p>
<p>That error is raised if the calculation server enters a state where no further calculations are possible.
You should catch that exception and create a new instance of <code class="xref mat mat-func docutils literal notranslate"><span class="pre">TCToolbox()</span></code>, which you use from that point.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="nb">import</span><span class="w"> </span><span class="n">tc_toolbox</span><span class="o">.*</span>
<span class="nb">import</span><span class="w"> </span><span class="n">tc_toolbox</span><span class="p">.</span><span class="n">diffusion</span><span class="o">.*</span>

<span class="n">temperatures</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">linspace</span><span class="p">(</span><span class="mi">900</span><span class="p">,</span><span class="mi">1100</span><span class="p">,</span><span class="mi">10</span><span class="p">);</span>
<span class="n">session</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">TCToolbox</span><span class="p">();</span>
<span class="k">for</span><span class="w"> </span><span class="nb">i</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">1</span><span class="p">:</span><span class="nb">length</span><span class="p">(</span><span class="n">temperatures</span><span class="p">)</span>
<span class="w">    </span><span class="n">temperature</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">temperatures</span><span class="p">(</span><span class="nb">i</span><span class="p">);</span>
<span class="w">    </span><span class="k">try</span>
<span class="w">        </span><span class="n">diffusion_result</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">session</span><span class="k">...</span>
<span class="w">                </span><span class="p">.</span><span class="n">select_thermodynamic_and_kinetic_databases_with_elements</span><span class="p">(</span><span class="s">&quot;FEDEMO&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;MFEDEMO&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;Fe&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Ni&quot;</span><span class="p">])</span><span class="k">...</span>
<span class="w">                </span><span class="p">.</span><span class="n">get_system</span><span class="p">()</span><span class="k">...</span>
<span class="w">                </span><span class="p">.</span><span class="n">with_isothermal_diffusion_calculation</span><span class="p">()</span><span class="k">...</span>
<span class="w">                    </span><span class="p">.</span><span class="n">set_temperature</span><span class="p">(</span><span class="n">temperature</span><span class="p">)</span><span class="k">...</span>
<span class="w">                    </span><span class="p">.</span><span class="n">set_simulation_time</span><span class="p">(</span><span class="mf">108000.0</span><span class="p">)</span><span class="k">...</span>
<span class="w">                    </span><span class="p">.</span><span class="n">add_region</span><span class="p">(</span><span class="n">Region</span><span class="p">(</span><span class="s">&quot;Austenite&quot;</span><span class="p">)</span><span class="k">...</span>
<span class="w">                        </span><span class="p">.</span><span class="n">set_width</span><span class="p">(</span><span class="mf">1E-4</span><span class="p">)</span><span class="k">...</span>
<span class="w">                        </span><span class="p">.</span><span class="n">with_grid</span><span class="p">(</span><span class="n">CalculatedGrid</span><span class="p">.</span><span class="n">linear</span><span class="p">().</span><span class="n">set_no_of_points</span><span class="p">(</span><span class="mi">50</span><span class="p">))</span><span class="k">...</span>
<span class="w">                        </span><span class="p">.</span><span class="n">with_composition_profile</span><span class="p">(</span><span class="n">CompositionProfile</span><span class="p">()</span><span class="k">...</span>
<span class="w">                            </span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="s">&quot;Ni&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">ElementProfile</span><span class="p">.</span><span class="n">linear</span><span class="p">(</span><span class="mf">10.0</span><span class="p">,</span><span class="w"> </span><span class="mf">50.0</span><span class="p">))</span><span class="k">...</span>
<span class="w">                        </span><span class="p">)</span><span class="k">...</span>
<span class="w">                    </span><span class="p">.</span><span class="n">add_phase</span><span class="p">(</span><span class="s">&quot;FCC_A1&quot;</span><span class="p">))</span><span class="k">...</span>
<span class="w">            </span><span class="p">.</span><span class="n">calculate</span><span class="p">();</span>

<span class="w">        </span><span class="p">[</span><span class="n">distance</span><span class="p">,</span><span class="w"> </span><span class="n">ni_fraction</span><span class="p">]</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">diffusion_result</span><span class="p">.</span><span class="n">get_mass_fraction_of_component_at_time</span><span class="p">(</span><span class="s">&quot;Ni&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">108000.0</span><span class="p">);</span>
<span class="w">        </span><span class="nb">disp</span><span class="p">(</span><span class="s">&quot;Succeeded!&quot;</span><span class="p">)</span>

<span class="w">    </span><span class="k">catch</span><span class="w"> </span><span class="n">e</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="nb">contains</span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">message</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;UnrecoverableCalculationException&#39;</span><span class="p">)</span>
<span class="w">            </span><span class="nb">disp</span><span class="p">(</span><span class="s">&#39;Could not calculate. Creating a new TCToolbox and continuing with next calculation...&#39;</span><span class="p">)</span>
<span class="w">            </span><span class="n">session</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">TCToolbox</span><span class="p">();</span>
<span class="w">        </span><span class="k">else</span>
<span class="w">            </span><span class="nb">disp</span><span class="p">(</span><span class="s">&#39;Could not calculate. Using the previous TCToolbox and continuing with next calculation...&#39;</span><span class="p">)</span>
<span class="w">        </span><span class="k">end</span>
<span class="w">    </span><span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
</section>
<section id="process-metallurgy-calculations">
<h2>Process Metallurgy Calculations<a class="headerlink" href="#process-metallurgy-calculations" title="Permalink to this heading">¶</a></h2>
<section id="equilibrium-calculations-with-changing-elements-between-calculations">
<h3>Equilibrium calculations with changing elements between calculations<a class="headerlink" href="#equilibrium-calculations-with-changing-elements-between-calculations" title="Permalink to this heading">¶</a></h3>
<p>It is possible to add, change or remove additions after performing an equilibrium calculation using
<a class="reference internal" href="calculation_packages/process_metallurgy_modules/equilibrium.html#+tc_toolbox.+process_metallurgy.+equilibrium.EquilibriumCalculation.calculate" title="+tc_toolbox.+process_metallurgy.+equilibrium.EquilibriumCalculation.calculate"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">+tc_toolbox.+process_metallurgy.+equilibrium.EquilibriumCalculation.calculate()</span></code></a>. This will change the elements
being present in the system if the elements of the additions are differing. The Process Metallurgy Module will handle
this situation by reloading the database with the latest set of elements. While this is an appropriate approach in most
cases, there can be some disadvantages: reloading the database takes some time and the internal engine state
is lost, which may lead to successive calculations failures in some situations.</p>
<p><strong>To avoid the database reload</strong>, it is possible <strong>to add the respective elements to additions being present in
all calculations (with a zero-fraction)</strong>:</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="nb">import</span><span class="w"> </span><span class="n">tc_toolbox</span><span class="p">.</span><span class="n">process_metallurgy</span><span class="p">.</span><span class="n">base</span><span class="o">.*</span><span class="p">;</span>
<span class="n">import</span><span class="w"> </span><span class="s">tc_toolbox.process_metallurgy.equilibrium.*</span><span class="p">;</span>
<span class="n">import</span><span class="w"> </span><span class="s">tc_toolbox.*</span>

<span class="n">session</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">tc_toolbox</span><span class="p">.</span><span class="n">TCToolbox</span><span class="p">();</span>

<span class="n">calc</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">session</span><span class="p">.</span><span class="n">with_metallurgy</span><span class="p">().</span><span class="n">with_adiabatic_equilibrium_calculation</span><span class="p">(</span><span class="n">ProcessDatabase</span><span class="p">.</span><span class="n">OXDEMO</span><span class="p">);</span>

<span class="c">% add the element Al with zero-fraction already</span>
<span class="n">steel</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">EquilibriumAddition</span><span class="p">(</span><span class="nb">containers.Map</span><span class="p">([</span><span class="s">&quot;Fe&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;C&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Al&quot;</span><span class="p">]),</span><span class="w"> </span><span class="p">{</span><span class="nb">NaN</span><span class="p">,</span><span class="w"> </span><span class="mf">4.5</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">}),</span><span class="w"> </span><span class="mf">100.0e3</span><span class="p">,</span><span class="w"> </span><span class="mi">1700</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">273.15</span><span class="p">);</span>
<span class="n">slag</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">EquilibriumAddition</span><span class="p">(</span><span class="nb">containers.Map</span><span class="p">([</span><span class="s">&quot;CaO&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;SiO2&quot;</span><span class="p">],</span><span class="w"> </span><span class="p">{</span><span class="mf">70.0</span><span class="p">,</span><span class="w"> </span><span class="mf">30.0</span><span class="p">}),</span><span class="w"> </span><span class="mf">3.0e3</span><span class="p">,</span><span class="w"> </span><span class="mi">1700</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">273.15</span><span class="p">);</span>

<span class="n">al_addition</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">EquilibriumAddition</span><span class="p">(</span><span class="nb">containers.Map</span><span class="p">([</span><span class="s">&quot;Al&quot;</span><span class="p">],</span><span class="w"> </span><span class="p">{</span><span class="mi">100</span><span class="p">}),</span><span class="w"> </span><span class="mf">1.0e3</span><span class="p">);</span>

<span class="n">calc</span><span class="k">...</span>
<span class="w"> </span><span class="p">.</span><span class="n">add_addition</span><span class="p">(</span><span class="n">steel</span><span class="p">)</span><span class="k">...</span>
<span class="w"> </span><span class="p">.</span><span class="n">add_addition</span><span class="p">(</span><span class="n">slag</span><span class="p">);</span>

<span class="n">result_1</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">calc</span><span class="p">.</span><span class="n">calculate</span><span class="p">();</span>

<span class="n">calc</span><span class="p">.</span><span class="n">add_addition</span><span class="p">(</span><span class="n">al_addition</span><span class="p">);</span>

<span class="n">result_2</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">calc</span><span class="p">.</span><span class="n">calculate</span><span class="p">();</span>
<span class="c">% evaluate the result as required ...</span>
</pre></div>
</div>
<p>Or <strong>to add a later addition already before the first call to</strong> <code class="xref mat mat-func docutils literal notranslate"><span class="pre">calculate()</span></code> <strong>with a zero amount</strong>:</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="nb">import</span><span class="w"> </span><span class="n">tc_toolbox</span><span class="p">.</span><span class="n">process_metallurgy</span><span class="p">.</span><span class="n">base</span><span class="o">.*</span><span class="p">;</span>
<span class="n">import</span><span class="w"> </span><span class="s">tc_toolbox.process_metallurgy.equilibrium.*</span><span class="p">;</span>
<span class="n">import</span><span class="w"> </span><span class="s">tc_toolbox.*</span>

<span class="n">session</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">tc_toolbox</span><span class="p">.</span><span class="n">TCToolbox</span><span class="p">();</span>

<span class="n">calc</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">session</span><span class="p">.</span><span class="n">with_metallurgy</span><span class="p">().</span><span class="n">with_adiabatic_equilibrium_calculation</span><span class="p">(</span><span class="n">ProcessDatabase</span><span class="p">.</span><span class="n">OXDEMO</span><span class="p">);</span>

<span class="n">steel</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">EquilibriumAddition</span><span class="p">(</span><span class="nb">containers.Map</span><span class="p">([</span><span class="s">&quot;Fe&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;C&quot;</span><span class="p">]),</span><span class="w"> </span><span class="p">{</span><span class="nb">NaN</span><span class="p">,</span><span class="w"> </span><span class="mf">4.5</span><span class="p">}),</span><span class="w"> </span><span class="mf">100.0e3</span><span class="p">,</span><span class="w"> </span><span class="mi">1700</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">273.15</span><span class="p">);</span>
<span class="n">slag</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">EquilibriumAddition</span><span class="p">(</span><span class="nb">containers.Map</span><span class="p">([</span><span class="s">&quot;CaO&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;SiO2&quot;</span><span class="p">],</span><span class="w"> </span><span class="p">{</span><span class="mf">70.0</span><span class="p">,</span><span class="w"> </span><span class="mf">30.0</span><span class="p">}),</span><span class="w"> </span><span class="mf">3.0e3</span><span class="p">,</span><span class="w"> </span><span class="mi">1700</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">273.15</span><span class="p">);</span>

<span class="c">% add the addition for now with zero-amount</span>
<span class="n">al_addition</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">EquilibriumAddition</span><span class="p">(</span><span class="nb">containers.Map</span><span class="p">([</span><span class="s">&quot;Al&quot;</span><span class="p">],</span><span class="w"> </span><span class="p">{</span><span class="mi">100</span><span class="p">}),</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>

<span class="n">calc</span><span class="k">...</span>
<span class="w"> </span><span class="p">.</span><span class="n">add_addition</span><span class="p">(</span><span class="n">al_addition</span><span class="p">)</span><span class="k">...</span>
<span class="w"> </span><span class="p">.</span><span class="n">add_addition</span><span class="p">(</span><span class="n">steel</span><span class="p">)</span><span class="k">...</span>
<span class="w"> </span><span class="p">.</span><span class="n">add_addition</span><span class="p">(</span><span class="n">slag</span><span class="p">);</span>

<span class="n">result_1</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">calc</span><span class="p">.</span><span class="n">calculate</span><span class="p">();</span>

<span class="n">calc</span><span class="p">.</span><span class="n">update_addition</span><span class="p">(</span><span class="n">al_addition</span><span class="p">.</span><span class="n">set_amount</span><span class="p">(</span><span class="mf">1.0e3</span><span class="p">));</span>

<span class="n">result_2</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">calc</span><span class="p">.</span><span class="n">calculate</span><span class="p">();</span>
<span class="c">% evaluate the result as required ...</span>
</pre></div>
</div>
</section>
<section id="zones">
<h3>Zones<a class="headerlink" href="#zones" title="Permalink to this heading">¶</a></h3>
<p>TC-Toolbox is providing a <em>framework</em> for building time-dependent kinetic simulations of industrial and academic
metallurgical processes where liquid phases are important. It is based on an <em>Effective Equilibrium Reaction Zone</em>
(EERZ) approach which is separating a process into different zones. These zones have identical temperature and
composition and are called <em>bulk zones</em>. Such zones can be in contact and react with each other by <em>reaction zones</em>.
That means a <em>reaction zone</em> is modelling the interface between two <em>bulk zones</em>. One bulk zone is typically the steel
melt and another bulk zone the top slag.</p>
</section>
<section id="applications">
<h3>Applications<a class="headerlink" href="#applications" title="Permalink to this heading">¶</a></h3>
<p>While this approach can in principle be extended to any number of zones, in the current release TC-Toolbox is
providing <strong>only one reaction zone</strong>. Practical work has however proven that this limitation is not critical for a
lot of industrial processes, including ladle furnaces, AOD- and VOD-converters. Even more processes can be modelled
with some limit of accuracy.</p>
<p>The reason for the power of the current implementation is that a number of important process features can be included:</p>
<ul class="simple">
<li><p>heating (<a class="reference internal" href="calculation_packages/process_metallurgy_modules/process.html#+tc_toolbox.+process_metallurgy.+process.Zone.add_power" title="+tc_toolbox.+process_metallurgy.+process.Zone.add_power"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">+tc_toolbox.+process_metallurgy.+process.Zone.add_power()</span></code></a>)</p></li>
<li><p>cooling (<a class="reference internal" href="calculation_packages/process_metallurgy_modules/process.html#+tc_toolbox.+process_metallurgy.+process.Zone.add_power" title="+tc_toolbox.+process_metallurgy.+process.Zone.add_power"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">+tc_toolbox.+process_metallurgy.+process.Zone.add_power()</span></code></a>)</p></li>
<li><p>heat transfer between bulk zones (<a class="reference internal" href="calculation_packages/process_metallurgy_modules/process.html#+tc_toolbox.+process_metallurgy.+process.ReactionZone.add_heat_transfer" title="+tc_toolbox.+process_metallurgy.+process.ReactionZone.add_heat_transfer"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">+tc_toolbox.+process_metallurgy.+process.ReactionZone.add_heat_transfer()</span></code></a>)</p></li>
<li><p>inclusion formation</p></li>
<li><p>inclusion flotation and other transfer of phase groups between bulk zones
(<a class="reference internal" href="calculation_packages/process_metallurgy_modules/process.html#+tc_toolbox.+process_metallurgy.+process.ReactionZone.add_transfer_of_phase_group" title="+tc_toolbox.+process_metallurgy.+process.ReactionZone.add_transfer_of_phase_group"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">+tc_toolbox.+process_metallurgy.+process.ReactionZone.add_transfer_of_phase_group()</span></code></a>)</p></li>
<li><p>addition of material and gas at any time in any zone
(<a class="reference internal" href="calculation_packages/process_metallurgy_modules/process.html#+tc_toolbox.+process_metallurgy.+process.Zone.add_addition" title="+tc_toolbox.+process_metallurgy.+process.Zone.add_addition"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">+tc_toolbox.+process_metallurgy.+process.Zone.add_addition()</span></code></a> /
<a class="reference internal" href="calculation_packages/process_metallurgy_modules/process.html#+tc_toolbox.+process_metallurgy.+process.Zone.add_continuous_addition" title="+tc_toolbox.+process_metallurgy.+process.Zone.add_continuous_addition"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">+tc_toolbox.+process_metallurgy.+process.Zone.add_continuous_addition()</span></code></a>)</p></li>
<li><p>an exhaust gas zone collecting all formed gas
(<a class="reference internal" href="calculation_packages/process_metallurgy_modules/process.html#+tc_toolbox.+process_metallurgy.+process.ProcessSimulationResult.get_exhaust_gas" title="+tc_toolbox.+process_metallurgy.+process.ProcessSimulationResult.get_exhaust_gas"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">+tc_toolbox.+process_metallurgy.+process.ProcessSimulationResult.get_exhaust_gas()</span></code></a>)</p></li>
<li><p>time-dependent definition of most parameters (e.g., mass transfer coefficient, transfer of phase group, heating, etc.)</p></li>
</ul>
<p>Please note that many of these features are called as well a <em>reaction zone</em> in other EERZ model implementations.</p>
</section>
<section id="implementation-of-practical-process-models">
<h3>Implementation of practical process models<a class="headerlink" href="#implementation-of-practical-process-models" title="Permalink to this heading">¶</a></h3>
<p>The Process Metallurgy Module has been successfully applied to a number of industrial processes.</p>
<p>Due to the broad range of industrial metallurgical processes, TC-Toolbox is not providing ready-to-use models for
certain processes. There are however examples available for common processes and this collection will be extended
over time. The implementation of a model is an abstraction of the real process and should always be kept as simple
as possible. Practical experience has proven that in many situations not more than one <em>reaction zone</em> is required.</p>
<p>The mass transfer coefficient is a fundamental parameter describing the kinetics in a <em>reaction zone</em> and is generally
an empirical parameter. It depends however mostly on the geometry and stirring conditions in the process and not on
the material compositions. Further on, the mass transfer coefficient has usually typical values for a given process -
regardless of the actual furnace. That means that existing suggestions from the literature can be used as a starting
point to derive the actual mass transfer coefficient for the process of interest.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="architecture.html" class="btn btn-neutral float-left" title="Architecture overview" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="api_reference.html" class="btn btn-neutral float-right" title="API Reference" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 1995-2023, Foundation of Computational Thermodynamics, Stockholm, Sweden.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>  

<style>
    /* Sidebar header (and topbar for mobile) */
    .wy-side-nav-search, .wy-nav-top {
        background: #700707;
    }
</style>


</body>
</html>